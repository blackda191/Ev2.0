<!DOCTYPE html>
<html lang="my" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BBOTLOGIC PRO SYSTEM</title>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto:wght@400;500;700&family=Noto+Sans+Myanmar:wght@400;600;700&family=Outfit:wght@300;500;700;900&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        darkBg: '#09090b', cardBg: '#18181b', lightBg: '#f1f5f9', lightCard: '#ffffff',
                        neonGreen: '#10b981', neonBlue: '#06b6d4', neonOrange: '#f59e0b',
                        neonPurple: '#a855f7', neonRed: '#ef4444', neonYellow: '#eab308'
                    }
                }
            }
        }
    </script>
    <style>
        body, html { margin: 0; padding: 0; height: 100dvh; overflow: hidden; font-family: 'Outfit', 'Noto Sans Myanmar', sans-serif; }
        
        .slide-up { animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .glow-text { text-shadow: 0 0 10px currentColor; }
        
        input, select, textarea { outline: none; transition: all 0.3s; color: inherit; }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .bottom-nav-padding { padding-bottom: 85px; }
    </style>

<link rel="manifest" href="manifest.json" />
<meta name="theme-color" content="#09090b" />
<link rel="apple-touch-icon" href="icons/icon-192.png" />

</head>
<body class="bg-lightBg dark:bg-darkBg text-slate-900 dark:text-zinc-100 transition-colors duration-300">
    <div id="root" class="h-full"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        function useLocalStorage(key, initialValue) {
            const[storedValue, setStoredValue] = useState(() => {
                try {
                    const item = window.localStorage.getItem(key);
                    return item ? JSON.parse(item) : initialValue;
                } catch (error) { return initialValue; }
            });
            const setValue = (value) => {
                try {
                    setStoredValue(prev => {
                        const valueToStore = value instanceof Function ? value(prev) : value;
                        window.localStorage.setItem(key, JSON.stringify(valueToStore));
                        return valueToStore;
                    });
                } catch (error) { console.error(error); }
            };
            return [storedValue, setValue];
        }

        const dictionary = {
            mn: {
                evTab: "EV ·ÄÄ·Ä≠·Äõ·Ä≠·Äö·Ä¨·Äô·Äª·Ä¨·Ä∏", homeTab: "·Ä°·Ä≠·Äô·Ä∫·Äû·ÄØ·Ä∂·Ä∏·Äú·Äª·Äæ·Äï·Ä∫·ÄÖ·ÄÖ·Ä∫",
                battTitle: "üîã ·Äò·ÄÄ·Ä∫·Äë·Äõ·ÄÆ ·Äê·Ää·Ä∫·ÄÜ·Ä±·Ä¨·ÄÄ·Ä∫·Äô·Äæ·ÄØ", chargeTitle: "üîå ·Ä°·Ä¨·Ä∏·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·ÄÅ·Äª·Ä≠·Äî·Ä∫", motorTitle: "üèçÔ∏è ·Äô·Ä±·Ä¨·Ä∫·Äê·Ä¨ & ·Äô·Äº·Äî·Ä∫·Äî·Äæ·ÄØ·Äî·Ä∫·Ä∏", ctrlTitle: "üéõÔ∏è ·ÄÄ·ÄΩ·Äî·Ä∫·Äë·Äõ·Ä≠·ÄØ·Äú·Ä¨ & ·Äù·Ä´·Äö·Ä¨·ÄÄ·Äº·Ä≠·ÄØ·Ä∏", rangeTitle: "üìè ·ÄÅ·Äõ·ÄÆ·Ä∏·Ä°·ÄÄ·ÄΩ·Ä¨·Ä°·Äù·Ä±·Ä∏", typeTitle: "üß™ ·Äò·ÄÄ·Ä∫·Äë·Äõ·ÄÆ ·Ä°·Äô·Äª·Ä≠·ÄØ·Ä∏·Ä°·ÄÖ·Ä¨·Ä∏ (Specs)",
                loadTitle: "‚ö° ·Ä°·Ä≠·Äô·Ä∫·Äû·ÄØ·Ä∂·Ä∏·Äô·ÄÆ·Äê·Ä¨ Load ·Äê·ÄΩ·ÄÄ·Ä∫·Äõ·Äî·Ä∫", itemName: "·Äï·ÄÖ·Äπ·ÄÖ·Ää·Ä∫·Ä∏·Ä°·Äô·Ää·Ä∫", qty: "·Ä°·Äõ·Ä±·Ä°·Äê·ÄΩ·ÄÄ·Ä∫", watts: "·Äù·Äï·Ä∫ (W)", addRow: "+ ·Ä°·Äû·ÄÖ·Ä∫·Äë·Ää·Ä∑·Ä∫·Äô·Ää·Ä∫", totalLoad: "·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏ Load",
                wvaTitle: "‚ö° V, A, W ·Äõ·Äæ·Ä¨·Äñ·ÄΩ·Ä±·Äõ·Äî·Ä∫", pumpTitle: "üíß ·Äô·Ä±·Ä¨·Ä∫·Äê·Ä¨/·Äõ·Ä±·ÄÖ·ÄØ·Äï·Ä∫·ÄÖ·ÄÄ·Ä∫", billTitle: "üí∞ ·Äô·ÄÆ·Äê·Ä¨·ÄÅ ·Äê·ÄΩ·ÄÄ·Ä∫·ÄÅ·Äª·ÄÄ·Ä∫·Äõ·Äî·Ä∫",
                settings: "·ÄÜ·ÄÄ·Ä∫·Äê·ÄÑ·Ä∫·Äô·Äª·Ä¨·Ä∏", theme: "·Ä°·Äú·ÄÑ·Ä∫·Ä∏ / ·Ä°·Äô·Äæ·Ä±·Ä¨·ÄÑ·Ä∫", font: "·Äñ·Ä±·Ä¨·ÄÑ·Ä∑·Ä∫·Äí·ÄÆ·Äá·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏", sound: "·Ä°·Äû·Ä∂ (UI Sounds)", anim: "·Äú·Äæ·ÄØ·Äï·Ä∫·Äõ·Äæ·Ä¨·Ä∏·Äô·Äæ·ÄØ (Animations)", uiSize: "·Ä°·Äõ·ÄΩ·Äö·Ä∫·Ä°·ÄÖ·Ä¨·Ä∏ (UI Size)", haptic: "·Äê·ÄØ·Äî·Ä∫·ÄÅ·Ä´·Äô·Äæ·ÄØ (Vibration)", about: "App ·Ä°·ÄÄ·Äº·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏", aboutDesc: "BBOTLOGIC System ·Äû·Ää·Ä∫ EV ·Äî·Äæ·ÄÑ·Ä∑·Ä∫ ·Ä°·Ä≠·Äô·Ä∫·Äû·ÄØ·Ä∂·Ä∏·Äú·Äª·Äæ·Äï·Ä∫·ÄÖ·ÄÖ·Ä∫ ·Äï·Äº·ÄÑ·Ä∫·ÄÜ·ÄÑ·Ä∫·Äû·Ä∞·Äô·Äª·Ä¨·Ä∏·Ä°·Äê·ÄΩ·ÄÄ·Ä∫ ·Ä°·Äë·Ä∞·Ä∏·Äï·Äº·ÄØ·Äú·ÄØ·Äï·Ä∫·Äë·Ä¨·Ä∏·Äû·Ä±·Ä¨ AI App ·Äñ·Äº·ÄÖ·Ä∫·Äï·Ä´·Äû·Ää·Ä∫·Åã", close: "·Äï·Ä≠·Äê·Ä∫·Äô·Ää·Ä∫",
                saveBtn: "Save ·Äú·ÄØ·Äï·Ä∫·Äô·Ää·Ä∫", resetBtn: "Data Reset ·Äú·ÄØ·Äï·Ä∫·Äô·Ää·Ä∫", edit: "·Äï·Äº·ÄÑ·Ä∫·Äô·Ää·Ä∫", delete: "·Äñ·Äª·ÄÄ·Ä∫·Äô·Ää·Ä∫", clearBtn: "Data ·Äõ·Äæ·ÄÑ·Ä∫·Ä∏·Äú·ÄÑ·Ä∫·Ä∏·Äô·Ää·Ä∫"
            },
            en: {
                evTab: "EV Tools", homeTab: "Home Elec",
                battTitle: "üîã Battery Pack", chargeTitle: "üîå Charge Time", motorTitle: "üèçÔ∏è Motor & Speed", ctrlTitle: "üéõÔ∏è Controller & Wire", rangeTitle: "üìè Range Estimator", typeTitle: "üß™ Battery Type Specs",
                loadTitle: "‚ö° House Power Load", itemName: "Item Name", qty: "Qty", watts: "Watts (W)", addRow: "+ Add Row", totalLoad: "Total Load",
                wvaTitle: "‚ö° Basic W, V, A", pumpTitle: "üíß AC Motor & Pump", billTitle: "üí∞ Electricity Bill",
                settings: "Settings", theme: "Theme Mode", font: "Font Design", sound: "UI Sounds", anim: "Animations", uiSize: "App UI Size", haptic: "Vibration", about: "About App", aboutDesc: "BBOTLOGIC System is a Pro AI assistant app for EV & Home Electric modifiers.", close: "Close",
                saveBtn: "Save Settings", resetBtn: "Reset Data", edit: "Edit", delete: "Delete", clearBtn: "Clear Data"
            }
        };

        function App() {
            const[activeTab, setActiveTab] = useState('ev'); 
            const[isSettingsOpen, setIsSettingsOpen] = useState(false);
            
            const[lang, setLang] = useLocalStorage('bbot_lang', 'mn'); 
            const[themeMode, setThemeMode] = useLocalStorage('bbot_theme', 'dark');
            const[fontStyle, setFontStyle] = useLocalStorage('bbot_font', 'Outfit');
            const[uiScale, setUiScale] = useLocalStorage('bbot_ui', 'md');
            const[soundEnabled, setSoundEnabled] = useLocalStorage('bbot_sound', true);
            const[animEnabled, setAnimEnabled] = useLocalStorage('bbot_anim', true);
            const[hapticEnabled, setHapticEnabled] = useLocalStorage('bbot_haptic', true);

            const t = dictionary[lang]; 

            useEffect(() => {
                if(themeMode === 'light') { document.documentElement.classList.add('light'); document.documentElement.classList.remove('dark'); }
                else { document.documentElement.classList.remove('light'); document.documentElement.classList.add('dark'); }
            }, [themeMode]);

            useEffect(() => { document.body.style.fontFamily = `"${fontStyle}", "Noto Sans Myanmar", sans-serif`; }, [fontStyle]);

            useEffect(() => {
                const root = document.documentElement;
                if (uiScale === 'sm') root.style.fontSize = '14px';
                else if (uiScale === 'lg') root.style.fontSize = '18px';
                else root.style.fontSize = '16px';
            }, [uiScale]);

            const triggerFeedback = () => {
                if(soundEnabled) {
                    try {
                        const ctx = new (window.AudioContext || window.webkitAudioContext)();
                        const osc = ctx.createOscillator(); const gain = ctx.createGain();
                        osc.connect(gain); gain.connect(ctx.destination);
                        osc.type = 'sine'; osc.frequency.setValueAtTime(600, ctx.currentTime);
                        gain.gain.setValueAtTime(0.05, ctx.currentTime);
                        gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.1);
                        osc.start(ctx.currentTime); osc.stop(ctx.currentTime + 0.1);
                    } catch(e) {}
                }
                if(hapticEnabled && window.navigator && window.navigator.vibrate) { window.navigator.vibrate(50); }
            };

            const handleTabSwitch = (id) => { triggerFeedback(); setActiveTab(id); };
            const toggleSettings = () => { triggerFeedback(); setIsSettingsOpen(!isSettingsOpen); };

            return (
                <div className="flex flex-col h-full bg-lightBg dark:bg-darkBg">
                    
                    {/* Header */}
                    <header className="py-2.5 md:py-3.5 bg-white dark:bg-darkBg shadow-sm dark:shadow-md border-b border-slate-200 dark:border-zinc-800 z-40 flex justify-between items-center px-4 md:px-6 shrink-0 transition-colors">
                        <div>
                            <h1 className="text-xl md:text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-neonBlue via-slate-500 dark:via-white to-neonPurple tracking-widest drop-shadow-sm">
                                BBOTLOGIC
                            </h1>
                            <p className="text-slate-500 dark:text-zinc-400 text-[9px] md:text-[10px] mt-0.5 uppercase tracking-widest font-semibold">Pro System</p>
                        </div>
                        
                        <div className="flex items-center gap-3">
                            <div className="flex bg-slate-100 dark:bg-zinc-900 rounded-full border border-slate-300 dark:border-zinc-700 p-0.5 cursor-pointer select-none">
                                <div onClick={() => { setLang('en'); triggerFeedback(); }} className={`px-2 py-1 text-[9px] font-bold rounded-full transition-all ${lang === 'en' ? 'bg-slate-800 dark:bg-white text-white dark:text-black shadow-md' : 'text-slate-500 hover:text-slate-800 dark:hover:text-white'}`}>EN</div>
                                <div onClick={() => { setLang('mn'); triggerFeedback(); }} className={`px-2 py-1 text-[9px] font-bold rounded-full transition-all ${lang === 'mn' ? 'bg-slate-800 dark:bg-white text-white dark:text-black shadow-md' : 'text-slate-500 hover:text-slate-800 dark:hover:text-white'}`}>MN</div>
                            </div>
                            <button onClick={toggleSettings} className="text-slate-600 dark:text-zinc-300 hover:text-black dark:hover:text-white transition-colors text-lg p-1.5 rounded-full bg-slate-100 dark:bg-zinc-800 border border-slate-300 dark:border-zinc-700 shadow-sm">
                                ‚öôÔ∏è
                            </button>
                        </div>
                    </header>

                    {/* Settings Modal */}
                    {isSettingsOpen && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/60 dark:bg-black/80 backdrop-blur-md p-4 fade-in">
                            <div className="bg-white dark:bg-cardBg border border-slate-200 dark:border-zinc-700 rounded-2xl w-full max-w-sm shadow-2xl overflow-hidden flex flex-col max-h-[90vh]">
                                <div className="p-3 border-b border-slate-200 dark:border-zinc-800 bg-slate-50 dark:bg-zinc-900 flex justify-between items-center">
                                    <h2 className="text-lg font-bold text-slate-800 dark:text-white">{t.settings}</h2>
                                    <button onClick={toggleSettings} className="text-slate-400 dark:text-zinc-400 hover:text-red-500 font-bold px-2">‚úï</button>
                                </div>
                                
                                <div className="p-4 overflow-y-auto no-scrollbar space-y-5 flex-1">
                                    <div className="space-y-4">
                                        <div className="flex justify-between items-center">
                                            <span className="text-sm font-semibold text-slate-700 dark:text-zinc-200">üåì {t.theme}</span>
                                            <div className="flex bg-slate-100 dark:bg-zinc-900 p-1 rounded-lg border border-slate-200 dark:border-zinc-700">
                                                <button onClick={() => setThemeMode('dark')} className={`px-2 py-1 text-[10px] font-bold rounded ${themeMode==='dark'?'bg-zinc-700 text-white':'text-slate-500'}`}>Dark</button>
                                                <button onClick={() => setThemeMode('light')} className={`px-2 py-1 text-[10px] font-bold rounded ${themeMode==='light'?'bg-white text-black shadow-sm':'text-slate-500'}`}>Light</button>
                                            </div>
                                        </div>
                                        <div className="flex justify-between items-center">
                                            <span className="text-sm font-semibold text-slate-700 dark:text-zinc-200">üî§ {t.font}</span>
                                            <select value={fontStyle} onChange={(e)=>setFontStyle(e.target.value)} className="text-[11px] p-1.5 rounded-lg border border-slate-200 dark:border-zinc-700 bg-slate-50 dark:bg-zinc-900 font-bold text-slate-800 dark:text-white">
                                                <option value="Outfit">Modern (Outfit)</option>
                                                <option value="Inter">Clean (Inter)</option>
                                                <option value="Roboto">Classic (Roboto)</option>
                                            </select>
                                        </div>
                                        <div className="flex justify-between items-center">
                                            <span className="text-sm font-semibold text-slate-700 dark:text-zinc-200">üîç {t.uiSize}</span>
                                            <div className="flex gap-1 bg-slate-100 dark:bg-zinc-900 p-1 rounded-lg border border-slate-200 dark:border-zinc-700">
                                                {['sm', 'md', 'lg'].map(size => (
                                                    <button key={size} onClick={() => setUiScale(size)} className={`px-2.5 py-1 text-xs font-bold rounded ${uiScale===size?'bg-neonBlue text-white dark:text-black shadow-sm':'text-slate-400'}`}>{size.toUpperCase()}</button>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="pt-2 pb-2 space-y-1">
                                        <ToggleRow label={`üîä ${t.sound}`} checked={soundEnabled} onChange={setSoundEnabled} />
                                        <ToggleRow label={`üì≥ ${t.haptic}`} checked={hapticEnabled} onChange={setHapticEnabled} />
                                        <ToggleRow label={`‚ú® ${t.anim}`} checked={animEnabled} onChange={setAnimEnabled} />
                                    </div>
                                    
                                    <div className="pt-2 flex gap-3 border-t border-slate-200 dark:border-zinc-800">
                                        <button onClick={() => { if(window.confirm('Are you sure you want to reset all data?')) { localStorage.clear(); window.location.reload(); } }} className="flex-1 py-2.5 bg-red-100 dark:bg-red-500/10 border border-red-300 dark:border-red-500/50 text-red-600 dark:text-red-500 rounded-lg text-sm font-bold hover:bg-red-200 dark:hover:bg-red-500/20 transition-colors">
                                            {t.resetBtn}
                                        </button>
                                        <button onClick={toggleSettings} className="flex-1 py-2.5 bg-slate-800 dark:bg-white text-white dark:text-black rounded-lg text-sm font-bold hover:bg-slate-700 dark:hover:bg-gray-200 transition-colors">
                                            {t.saveBtn}
                                        </button>
                                    </div>

                                    <div className="pt-2 border-t border-slate-200 dark:border-zinc-800">
                                        <span className="text-sm font-bold text-slate-700 dark:text-zinc-200 block mb-1">‚ÑπÔ∏è {t.about}</span>
                                        <p className="text-[10px] text-slate-500 dark:text-zinc-400 leading-relaxed">{t.aboutDesc}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Main Content */}
                    <main className="flex-1 overflow-y-auto no-scrollbar relative transition-colors">
                        <div className="max-w-3xl mx-auto p-3 md:p-5 pb-28 md:pb-32">
                            {activeTab === 'ev' && <EvToolsTab t={t} anim={animEnabled} lang={lang} />}
                            {activeTab === 'home' && <HomeToolsTab t={t} anim={animEnabled} />}
                        </div>
                    </main>

                    {/* Bottom Nav */}
                    <nav className="bottom-nav fixed bottom-3 left-1/2 transform -translate-x-1/2 w-[92%] max-w-md bg-white/90 dark:bg-[#18181b]/90 backdrop-blur-xl border border-slate-200 dark:border-zinc-700/60 rounded-3xl shadow-[0_10px_30px_rgba(0,0,0,0.15)] dark:shadow-[0_10px_40px_rgba(0,0,0,0.5)] z-40 pb-safe">
                        <div className="flex justify-between items-center px-2 py-1.5 gap-2">
                            <TabBtn id="ev" icon="üèçÔ∏è" label={t.evTab} active={activeTab==='ev'} onClick={()=>handleTabSwitch('ev')} color="text-neonBlue" />
                            <TabBtn id="home" icon="üè†" label={t.homeTab} active={activeTab==='home'} onClick={()=>handleTabSwitch('home')} color="text-neonYellow" />
                        </div>
                    </nav>

                </div>
            );
        }

        /* --- Components --- */
        function ToggleRow({ label, checked, onChange }) {
            return (
                <div className="flex justify-between items-center py-2 border-b border-slate-100 dark:border-zinc-800/50 last:border-0">
                    <span className="text-sm font-semibold text-slate-700 dark:text-zinc-200">{label}</span>
                    <button 
                        type="button" 
                        onClick={() => onChange(!checked)} 
                        className={`relative inline-flex h-6 w-11 shrink-0 items-center rounded-full transition-colors duration-300 ease-in-out focus:outline-none ${checked ? 'bg-neonBlue' : 'bg-slate-300 dark:bg-zinc-600'}`}
                    >
                        <span className={`inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition duration-300 ease-in-out ${checked ? 'translate-x-[22px]' : 'translate-x-[2px]'}`} />
                    </button>
                </div>
            );
        }

        function TabBtn({ id, icon, label, active, onClick, color }) {
            return (
                <button onClick={onClick} className={`flex flex-col items-center justify-center w-[48%] py-1.5 rounded-2xl transition-all duration-300 ease-out ${active ? `bg-slate-100 dark:bg-zinc-800/80 shadow-inner ${color}` : 'text-slate-400 dark:text-zinc-500 hover:text-slate-600 dark:hover:text-zinc-400'}`}>
                    <span className={`text-[20px] mb-0.5 transition-transform ${active ? 'transform -translate-y-0.5 scale-110' : ''}`}>{icon}</span>
                    <span className="text-[9px] md:text-[10px] font-bold tracking-wider uppercase">{label}</span>
                </button>
            );
        }

        function Card({ title, color, children }) {
            return (
                <div className="p-3.5 md:p-4 bg-white dark:bg-cardBg rounded-xl border border-slate-200 dark:border-zinc-800 shadow-sm dark:shadow-md relative overflow-hidden group">
                    <div className={`absolute top-0 left-0 w-1 h-full bg-${color}`}></div>
                    <h2 className={`text-[15px] md:text-lg font-bold mb-3 tracking-wide text-${color}`}>{title}</h2>
                    {children}
                </div>
            );
        }

        /* --- Tabs --- */
        function EvToolsTab({ t, anim, lang }) {
            return (
                <div className={`space-y-4 md:space-y-5 ${anim ? 'slide-up' : ''}`}>
                    <Card title={t.typeTitle} color="neonGreen"><BatteryTypeCalc lang={lang} /></Card>
                    <Card title={t.battTitle} color="neonGreen"><BatteryCalc /></Card>
                    <Card title={t.chargeTitle} color="neonBlue"><ChargerCalc /></Card>
                    <Card title={t.motorTitle} color="neonOrange"><MotorCalc /></Card>
                    <Card title={t.ctrlTitle} color="neonPurple"><ControllerCalc /></Card>
                    <Card title={t.rangeTitle} color="neonRed"><RangeCalc /></Card>
                </div>
            );
        }

        function HomeToolsTab({ t, anim }) {
            return (
                <div className={`space-y-4 md:space-y-5 ${anim ? 'slide-up' : ''}`}>
                    <Card title={t.loadTitle} color="neonPurple"><HouseLoadCalc t={t} /></Card>
                    <Card title={t.wvaTitle} color="neonYellow"><BasicWVACalc /></Card>
                    <Card title={t.pumpTitle} color="neonBlue"><PumpCalc /></Card>
                    <Card title={t.billTitle} color="neonGreen"><BillCalc /></Card>
                </div>
            );
        }

        /* --- Calculators --- */
        function Input({ label, val, set, step="1" }) {
            return (
                <div className="flex flex-col">
                    <span className="text-[8px] md:text-[9px] text-slate-500 dark:text-zinc-400 font-bold mb-1 uppercase">{label}</span>
                    <input type="number" step={step} value={val} onChange={(e)=>set(e.target.value===''?'':Number(e.target.value))} className="border border-slate-300 dark:border-zinc-700 bg-slate-50 dark:bg-zinc-900 rounded-md px-2 py-1.5 text-slate-800 dark:text-white text-[13px] md:text-sm font-bold shadow-inner" />
                </div>
            );
        }
        
        function ResultBox({ label, val, unit="", color="text-slate-800 dark:text-white", isText=false, highlight=false, full=false }) {
            const displayVal = (val === "NaN" || val === "Infinity" || val === undefined) ? "0" : val;
            return (
                <div className={`p-2 rounded-lg text-center border ${highlight?'border-slate-300 dark:border-zinc-600 bg-slate-100 dark:bg-zinc-800 shadow-sm':'border-slate-200 dark:border-zinc-800 bg-slate-50 dark:bg-zinc-900'} ${full?'col-span-full':''}`}>
                    <div className="text-[8px] md:text-[9px] text-slate-500 dark:text-zinc-500 font-bold uppercase mb-1">{label}</div>
                    <div className={`${isText?'text-[14px] md:text-base':'text-[16px] md:text-lg'} font-black ${color} ${highlight?'glow-text':''}`}>{displayVal} {unit && <span className="text-[10px] text-slate-400 dark:text-zinc-500">{unit}</span>}</div>
                </div>
            );
        }

        function HouseLoadCalc({ t }) {
            const[rows, setRows] = useState([{ id: Date.now(), name: '', qty: 1, watts: 100 }]);

            const addRow = () => {
                setRows([...rows, { id: Date.now(), name: '', qty: 1, watts: 0 }]);
            };

            const updateRow = (id, field, value) => {
                setRows(rows.map(r => r.id === id ? { ...r,[field]: value } : r));
            };

            const removeRow = (id) => {
                if (rows.length > 1) setRows(rows.filter(r => r.id !== id));
            };

            const totalLoad = rows.reduce((sum, r) => sum + ((Number(r.qty) || 0) * (Number(r.watts) || 0)), 0);

            return (
                <div className="space-y-3">
                    {rows.map((row, index) => (
                        <div key={row.id} className="flex gap-2 items-center bg-slate-50 dark:bg-zinc-900/50 p-2 rounded-lg border border-slate-200 dark:border-zinc-800 transition-all">
                            <div className="flex-1 grid grid-cols-3 gap-2">
                                <div className="col-span-1">
                                    <span className="text-[8px] text-slate-500 dark:text-zinc-400 font-bold mb-1 uppercase block">{t.itemName}</span>
                                    <input type="text" value={row.name} onChange={(e) => updateRow(row.id, 'name', e.target.value)} placeholder="TV, Fan..." className="w-full border border-slate-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 rounded-md px-2 py-1.5 text-slate-800 dark:text-white text-[12px] md:text-[13px] font-bold shadow-inner" />
                                </div>
                                <div className="col-span-1">
                                    <span className="text-[8px] text-slate-500 dark:text-zinc-400 font-bold mb-1 uppercase block">{t.qty}</span>
                                    <input type="number" min="1" value={row.qty} onChange={(e) => updateRow(row.id, 'qty', e.target.value)} className="w-full border border-slate-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 rounded-md px-2 py-1.5 text-slate-800 dark:text-white text-[12px] md:text-[13px] font-bold shadow-inner" />
                                </div>
                                <div className="col-span-1">
                                    <span className="text-[8px] text-slate-500 dark:text-zinc-400 font-bold mb-1 uppercase block">{t.watts}</span>
                                    <input type="number" min="0" value={row.watts} onChange={(e) => updateRow(row.id, 'watts', e.target.value)} className="w-full border border-slate-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 rounded-md px-2 py-1.5 text-slate-800 dark:text-white text-[12px] md:text-[13px] font-bold shadow-inner" />
                                </div>
                            </div>
                            <button onClick={() => removeRow(row.id)} disabled={rows.length === 1} className={`p-1.5 rounded-md text-white font-bold text-[10px] w-6 h-6 flex items-center justify-center mt-3 ${rows.length === 1 ? 'bg-slate-300 dark:bg-zinc-700 cursor-not-allowed' : 'bg-red-500 hover:bg-red-600 shadow-sm'}`}>‚úï</button>
                        </div>
                    ))}
                    
                    <button onClick={addRow} className="w-full py-2 border border-dashed border-neonPurple text-neonPurple rounded-lg text-xs font-bold bg-neonPurple/5 hover:bg-neonPurple/10 transition-colors">
                        {t.addRow}
                    </button>

                    <div className="pt-2">
                        <ResultBox label={t.totalLoad} val={totalLoad.toLocaleString()} unit="W" color="text-neonPurple" highlight full />
                    </div>
                </div>
            );
        }

        function BatteryTypeCalc({ lang }) {
            const[type, setType] = useState('lead_acid'); const[v, setV] = useState(72); const[ah, setAh] = useState(32);
            let maxV = 0, cutV = 0, safeAh = 0;
            const volt = v || 0; const amp = ah || 0;
            if (type === 'lead_acid' || type === 'gel') { maxV = (volt / 12) * 14.4; cutV = (volt / 12) * 10.5; safeAh = amp * 0.5; } 
            else if (type === 'li_ion') { const cells = Math.round(volt / 3.7); maxV = cells * 4.2; cutV = cells * 2.8; safeAh = amp * 0.8; } 
            else if (type === 'lifepo4') { const cells = Math.round(volt / 3.2); maxV = cells * 3.65; cutV = cells * 2.5; safeAh = amp * 0.95; }

            const l = lang === 'en' ? { t: "Type", v: "Volt", a: "Cap (Ah)", m: "Max Charge", c: "Cut-off", s: "Safe Usable" } : { t: "·Ä°·Äô·Äª·Ä≠·ÄØ·Ä∏·Ä°·ÄÖ·Ä¨·Ä∏", v: "System Volt", a: "Capacity (Ah)", m: "Max Charge", c: "Cut-off", s: "Safe Usable" };
            return (
                <div className="space-y-3">
                    <div className="flex flex-col"><span className="text-[8px] md:text-[9px] text-slate-500 dark:text-zinc-400 font-bold mb-1 uppercase">{l.t}</span>
                        <select value={type} onChange={(e)=>setType(e.target.value)} className="w-full text-[13px] border border-slate-300 dark:border-zinc-700 rounded-lg p-1.5 text-slate-800 dark:text-white font-bold bg-slate-50 dark:bg-zinc-900 shadow-inner">
                            <option value="lead_acid">Lead-Acid (·ÄÅ·Ä≤·Ä°·ÄÄ·Ä∫·ÄÖ·ÄÖ·Ä∫)</option><option value="gel">Gel Battery (·ÄÇ·Äª·Äö·Ä∫·Äú·Ä∫)</option>
                            <option value="li_ion">Lithium-Ion NMC (·Äú·ÄÆ·Äû·ÄÆ·Äö·Äô·Ä∫·Ä°·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏·Äö·ÄΩ·Äî·Ä∫·Ä∏)</option><option value="lifepo4">LiFePO4 (·Äú·ÄÆ·Äû·ÄÆ·Äö·Äô·Ä∫·Äñ·Ä±·Ä¨·Ä∑·ÄÖ·Äñ·Ä≠·Äê·Ä∫)</option>
                        </select>
                    </div>
                    <div className="grid grid-cols-2 gap-3"><Input label={l.v} val={v} set={setV} /><Input label={l.a} val={ah} set={setAh} /></div>
                    <div className="grid grid-cols-3 gap-2 mt-2">
                        <ResultBox label={l.m} val={maxV?maxV.toFixed(1):0} unit="V" color="text-neonBlue" />
                        <ResultBox label={l.c} val={cutV?cutV.toFixed(1):0} unit="V" color="text-neonRed" />
                        <ResultBox label={l.s} val={safeAh?safeAh.toFixed(1):0} unit="Ah" color="text-neonGreen" highlight />
                    </div>
                </div>
            );
        }

        function BatteryCalc() {
            const[s, setS]=useState(20); const[p, setP]=useState(10); const[v, setV]=useState(3.6); const[ah, setAh]=useState(3.2);
            return (<div className="space-y-3"><div className="grid grid-cols-2 gap-3"><Input label="Series (S)" val={s} set={setS} /><Input label="Parallel (P)" val={p} set={setP} /><Input label="Cell V" val={v} set={setV} step="0.1" /><Input label="Cell Ah" val={ah} set={setAh} step="0.1" /></div><div className="grid grid-cols-3 gap-2 mt-2"><ResultBox label="Total V" val={((s||0)*(v||0)).toFixed(1)} /><ResultBox label="Total Ah" val={((p||0)*(ah||0)).toFixed(1)} /><ResultBox label="Energy Wh" val={((s||0)*(v||0)*(p||0)*(ah||0)).toFixed(0)} color="text-neonGreen" highlight /></div></div>);
        }
        function ChargerCalc() {
            const[ah, setAh]=useState(32); const[a, setA]=useState(5); const[pct, setPct]=useState(20);
            const time = a ? (((ah||0) * ((100-(pct||0))/100) / a)*1.15).toFixed(1) : 0;
            return (<div className="space-y-3"><div className="grid grid-cols-3 gap-3"><Input label="Batt Ah" val={ah} set={setAh} /><Input label="Charger A" val={a} set={setA} /><Input label="Current %" val={pct} set={setPct} /></div><ResultBox label="Time to 100% (Hours)" val={time} color="text-neonBlue" highlight full /></div>);
        }
        function MotorCalc() {
            const[v, setV]=useState(72); const[w, setW]=useState(2000); const[kv, setKv]=useState(12); const[inch, setInch]=useState(14); 
            const rpm = (v||0)*(kv||0);
            return (<div className="space-y-3"><div className="grid grid-cols-4 gap-2"><Input label="Volts" val={v} set={setV} /><Input label="Watts" val={w} set={setW} /><Input label="KV" val={kv} set={setKv} /><Input label="Inch" val={inch} set={setInch} /></div><div className="grid grid-cols-3 gap-2"><ResultBox label="Amps" val={v?((w||0)/v).toFixed(1):0} /><ResultBox label="Max RPM" val={rpm.toFixed(0)} /><ResultBox label="Top km/h" val={((rpm * (inch||0) * 0.0254 * Math.PI * 60)/1000).toFixed(1)} color="text-neonOrange" highlight /></div></div>);
        }
        function ControllerCalc() {
            const[v, setV]=useState(72); const[a, setA]=useState(50); const getAWG=(amps)=>{ if(!amps) return "-"; if(amps<=20) return"12AWG"; if(amps<=30) return"10AWG"; if(amps<=50) return"8AWG"; if(amps<=80) return"6AWG"; return"4AWG+"; };
            return (<div className="space-y-3"><div className="grid grid-cols-2 gap-3"><Input label="Volts" val={v} set={setV} /><Input label="Max Amps" val={a} set={setA} /></div><div className="grid grid-cols-2 gap-2"><ResultBox label="Peak Power (W)" val={((v||0)*(a||0)).toFixed(0)} color="text-neonPurple" highlight /><ResultBox label="Wire Size" val={getAWG(a)} isText /></div></div>);
        }
        function RangeCalc() {
            const[v, setV]=useState(72); const[ah, setAh]=useState(32); const[eff, setEff]=useState(20);
            const range = eff ? (((v||0)*(ah||0))/eff).toFixed(1) : 0;
            return (<div className="space-y-3"><div className="grid grid-cols-3 gap-3"><Input label="Volts" val={v} set={setV} /><Input label="Batt Ah" val={ah} set={setAh} /><Input label="Wh/km" val={eff} set={setEff} /></div><ResultBox label="Max Distance (km)" val={range} color="text-neonRed" highlight full /></div>);
        }
        function BasicWVACalc() {
            const[f, setF]=useState('W'); const[v, setV]=useState(220); const[a, setA]=useState(5); const[w, setW]=useState(1100); 
            const r = f==='W'?{l:'Watt (W)', v:((v||0)*(a||0)).toFixed(1)} : f==='A'?{l:'Ampere (A)', v:((w||0)/(v||1)).toFixed(2)} : {l:'Voltage (V)', v:((w||0)/(a||1)).toFixed(1)};
            return (<div className="space-y-3"><select value={f} onChange={(e)=>setF(e.target.value)} className="w-full text-[13px] border border-slate-300 dark:border-zinc-700 rounded-lg p-1.5 text-slate-800 dark:text-white bg-slate-50 dark:bg-zinc-900"><option value="W">Find Watt (W)</option><option value="V">Find Voltage (V)</option><option value="A">Find Ampere (A)</option></select><div className="grid grid-cols-2 gap-3">{f!=='V' && <Input label="Volts (V)" val={v} set={setV} />}{f!=='A' && <Input label="Amps (A)" val={a} set={setA} />}{f!=='W' && <Input label="Watts (W)" val={w} set={setW} />}</div><ResultBox label={r.l} val={r.v} color="text-neonYellow" highlight full /></div>);
        }
        function PumpCalc() {
            const[w, setW]=useState(750); const[v, setV]=useState(220); const pf=0.8; const a = (w||0)/((v||1)*pf); const b =[6,10,16,20,25,32,40].find(x=>x>=a*1.25)||">40"; const wire = b>25?"6.0":b>16?"4.0":b>10?"2.5":"1.5";
            return (<div className="space-y-3"><div className="grid grid-cols-2 gap-3"><Input label="Motor Watts" val={w} set={setW} /><Input label="AC Volts" val={v} set={setV} /></div><div className="grid grid-cols-3 gap-2"><ResultBox label="Breaker Type" val="C / D" isText /><ResultBox label="Size (Amp)" val={v?`${b}A`:"-"} isText /><ResultBox label="Wire (mm¬≤)" val={v?wire:"-"} color="text-neonBlue" isText highlight /></div></div>);
        }
        function BillCalc() {
            const[w, setW]=useState(1500); const[h, setH]=useState(8); const[c, setC]=useState(150); const cost = (((w||0)*(h||0))/1000)*(c||0);
            return (<div className="space-y-3"><div className="grid grid-cols-3 gap-3"><Input label="Total Watts" val={w} set={setW} /><Input label="Hours/Day" val={h} set={setH} /><Input label="1 Unit (MMK)" val={c} set={setC} /></div><div className="grid grid-cols-2 gap-2"><ResultBox label="Daily Cost" val={cost.toLocaleString()} /><ResultBox label="Monthly (30 Days)" val={(cost*30).toLocaleString()} color="text-neonGreen" highlight /></div></div>);
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>

<script>
if ("serviceWorker" in navigator) {
  window.addEventListener("load", () => {
    navigator.serviceWorker.register("sw.js");
  });
}
</script>

</body>
</html>